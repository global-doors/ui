import{j as e,M as R,B as p,N as P,O as z,Q as W,e as N,p as D,S as b,I as j,h as V,U as G,r as f,W as H,F as T,V as B,G as E,X as U,f as A,E as Q}from"./index-2273288b.js";import{b as L,c as q,M as X,d as Y,e as J,O as K,f as Z,F as _,R as C,u as $}from"./rhf-text-field-8c22bc5c.js";import{M as ee,C as v,D as se,R as F}from"./rhf-date-picker-8a280f69.js";import{B as M}from"./Button-86ed6f88.js";import{I as y}from"./Close-f75c2784.js";import"./KeyboardArrowRight-245f2dc5.js";const S=({name:s,chip:o,label:a,options:i,checkbox:m,placeholder:l,helperText:u,sx:x,...c})=>{const{control:t}=L(),h=r=>{const n=i.filter(d=>r.includes(d.value));return!n.length&&l?e.jsx(p,{component:"em",sx:{color:"text.disabled"},children:l}):o?e.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:n.map(d=>e.jsx(v,{label:d.label,size:"small"},d.value))}):n.map(d=>d.label).join(", ")};return e.jsx(q,{control:t,name:s,render:({field:r,fieldState:{error:n}})=>e.jsxs(X,{size:"small",sx:x,children:[a&&e.jsxs(Y,{id:s,children:[" ",a," "]}),e.jsxs(J,{...r,displayEmpty:!!l,input:e.jsx(K,{error:!!n,fullWidth:!0,label:a,size:"small"}),labelId:s,multiple:!0,renderValue:h,size:"small",...c,children:[l&&e.jsx(R,{disabled:!0,value:"",children:e.jsxs("em",{children:[" ",l," "]})}),i.map(d=>{const w=r.value.includes(d.value);return e.jsxs(R,{value:d.value,children:[m&&e.jsx(ee,{checked:w,disableRipple:!0,size:"small"}),d.label]},d.value)})]}),(!!n||u)&&e.jsx(Z,{error:!!n,children:n?n==null?void 0:n.message:u})]})})},re=s=>P(["sales-orders",s],()=>W(s),z()),te=()=>[{field:"OrderNumber",headerName:"Order No."},{field:"OrderDate",headerName:"Order Date"},{field:"OrderStatus",headerName:"Status"},{field:"CurrencyCode",headerName:"Currency",valueGetter:s=>{var o,a;return(a=(o=s.row)==null?void 0:o.Currency)==null?void 0:a.CurrencyCode}},{field:"cost",headerName:"Cost",valueGetter:()=>"TODO"}],ae=({data:s,loading:o=!1,...a})=>{const i=N(),m=l=>{const u=l.row.OrderNumber,x=D.dashboard.sales.order;i(x(u))};return e.jsx(se,{...a,autoHeight:!0,columns:te(),disableColumnMenu:!0,disableRowSelectionOnClick:!0,getRowId:l=>l.OrderNumber,loading:o,onRowClick:m,paginationMode:"server",rows:s,sx:{mx:-3,"& .MuiDataGrid-row":{cursor:"pointer"}}})},O=({label:s,children:o,sx:a,...i})=>e.jsxs(b,{component:V,direction:"row",spacing:1,sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...a},variant:"outlined",...i,children:[e.jsx(p,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(b,{direction:"row",flexWrap:"wrap",spacing:1,children:o})]}),oe=({filters:s,onFilters:o,onResetFilters:a,results:i,...m})=>{const l=t=>{const h=s.orderStatus.filter(r=>r!==t);o("orderStatus",h)},u=t=>{const h=s.warehouse.filter(r=>r!==t);o("warehouse",h)},x=t=>{const h=s.deliveryMethod.filter(r=>r!==t);o("deliveryMethod",h)},c=!!s.orderStatus.length&&!!s.deliveryMethod.length&&!!s.warehouse.length;return e.jsxs(b,{alignItems:"flex-end",direction:"row",spacing:1,...m,children:[e.jsxs(b,{alignItems:"center",direction:"row",flexGrow:1,flexWrap:"wrap",spacing:1,children:[!!s.orderStatus.length&&e.jsx(O,{label:"Status:",children:s.orderStatus.map(t=>e.jsx(v,{label:t,onDelete:()=>l(t),size:"small"},t))}),!!s.warehouse.length&&e.jsx(O,{label:"Warehouse:",children:s.warehouse.map(t=>e.jsx(v,{label:t,onDelete:()=>u(t),size:"small"},t))}),!!s.deliveryMethod.length&&e.jsx(O,{label:"Delivery Method:",children:s.deliveryMethod.map(t=>e.jsx(v,{label:t,onDelete:()=>x(t),size:"small"},t))}),c&&e.jsx(M,{color:"error",onClick:a,startIcon:e.jsx(j,{icon:"solar:trash-bin-minimalistic-line-duotone"}),children:"Clear"})]}),e.jsxs(p,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(p,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]})]})},le=[{label:"Placed",value:"placed"},{label:"Pending",value:"pending"}],ne=[{label:"Warehouse 1",value:"warehouse1"}],de=[{label:"Royal Mail",value:"royalMail"}],ie=[{label:"Yes",value:"yes"},{label:"No",value:"no"}],ue=({methods:s,resultsCount:o,showFilters:a})=>{const i=(l,u)=>{s.reset(x=>({...x,[l]:u}))},m=()=>s.reset();return e.jsxs(_,{methods:s,children:[e.jsx(G,{in:a,children:e.jsxs(b,{spacing:2,children:[e.jsxs(p,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(S,{checkbox:!0,fullWidth:!0,label:"Status",name:"orderStatus",options:le,size:"small"}),e.jsx(C,{InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Name",name:"customerName"}),e.jsx(C,{InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Order Number",name:"orderNumber"}),e.jsx(S,{checkbox:!0,fullWidth:!0,label:"Warehouse",name:"warehouse",options:ne})]}),e.jsxs(p,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(C,{InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Reference",name:"customerRef"}),e.jsx(S,{checkbox:!0,label:"Delivery Method",name:"deliveryMethod",options:de}),e.jsx(S,{label:"Printed",name:"printed",options:ie}),e.jsx(F,{label:"Date From",name:"dateFrom"}),e.jsx(F,{label:"Date To",name:"dateTo"})]})]})}),e.jsx(p,{sx:{py:1},children:e.jsx(oe,{filters:s.watch(),onFilters:i,onResetFilters:m,results:o})})]})},be=()=>{const o=$({defaultValues:{orderStatus:[],customerName:"",orderNumber:"",customerRef:"",warehouse:[],deliveryMethod:[],printed:[],dateFrom:void 0,dateTo:void 0},mode:"onChange"}),[a,i]=f.useState(!0),m=()=>i(!a),l=N(),[u,x]=f.useState({page:0,pageSize:5}),{data:c,isLoading:t}=re({page:u.page+1,pageSize:u.pageSize}),h=c==null?void 0:c.Items,r=c==null?void 0:c.Pagination,n=o.watch(),d=f.useMemo(()=>{let g=(h??[]).slice();return n.orderStatus.length&&(g=g.filter(k=>n.orderStatus.includes(k.OrderStatus))),g},[h,n.orderStatus]),[w,I]=f.useState((r==null?void 0:r.PageSize)||0);return f.useEffect(()=>{I(g=>(r==null?void 0:r.NumberOfItems)!==void 0?r==null?void 0:r.NumberOfItems:g)},[r==null?void 0:r.NumberOfItems,I]),e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" View Sales Orders"})}),e.jsxs(T,{maxWidth:"xl",children:[e.jsx(B,{action:e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(M,{startIcon:e.jsx(j,{icon:"solar:export-line-duotone"}),variant:"outlined",children:"Export"}),e.jsx(M,{onClick:()=>l("/dashboard/sales/add-order"),startIcon:e.jsx(j,{icon:"solar:add-square-line-duotone"}),variant:"contained",children:"Add Sales Order"})]}),heading:"View Sales Orders",links:[{name:"Sales",href:D.dashboard.root},{name:"View Sales Orders"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(E,{children:[e.jsx(U,{action:e.jsx(A,{onClick:m,children:e.jsx(j,{icon:a?"solar:filter-bold-duotone":"solar:filter-line-duotone"})})}),e.jsxs(Q,{sx:{pt:0},children:[e.jsx(ue,{methods:o,resultsCount:d.length,showFilters:a}),e.jsx(ae,{data:d,loading:t,onPaginationModelChange:x,paginationMode:"server",paginationModel:u,rowCount:w})]})]})]})]})};export{be as default};
