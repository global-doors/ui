import{a as v,r as d,b as F,c as T,d as A,e as I,P as R,j as e,W as E,S as c,T as W,f as k,I as q,L as B,R as H,p as N}from"./index-8a437de6.js";import{u as U,F as _,R as l}from"./rhf-text-field-490d22cc.js";import{c as $,a as u,o as z}from"./index.esm-6fc80645.js";import{A as C}from"./Alert-761a7cb8.js";import{I as G}from"./Close-e813dc8d.js";import{L as M}from"./LoadingButton-fac6aaa9.js";import"./Button-d99c1dc1.js";const Z=()=>{const m=v(),[r]=d.useState(""),o=F().get("returnTo"),s=T(),h=$().shape({username:u().required("Username is required"),password:u().required("Password is required")}),p={username:"",password:""},a=U({resolver:z(h),defaultValues:p}),{reset:n,handleSubmit:g}=a,{login:x}=A(),{mutate:f,isSuccess:t,isError:i,error:j,isLoading:b}=x,w=async S=>f(S),y=I();d.useEffect(()=>{t&&y(o||R),i&&n()},[j,i,t,n,o,m]);const L=e.jsx(c,{spacing:2,sx:{mb:5},children:e.jsx(W,{variant:"h4",children:"Sign in"})}),P=e.jsxs(c,{spacing:2.5,sx:{minWidth:320},children:[!!r&&e.jsx(C,{severity:"error",children:r}),e.jsx(l,{fullWidth:!0,label:"Username",name:"username"}),e.jsx(l,{fullWidth:!0,InputProps:{endAdornment:e.jsx(G,{position:"end",children:e.jsx(k,{edge:"end",onClick:s.onToggle,children:e.jsx(q,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},label:"Password",name:"password",type:s.value?"text":"password"}),e.jsx(B,{color:"inherit",component:H,href:N.auth.jwt.forgotPassword,sx:{alignSelf:"flex-end"},underline:"always",variant:"body2",children:"Forgot password?"}),e.jsx(M,{color:"inherit",fullWidth:!0,loading:b,size:"large",type:"submit",variant:"contained",children:"Login"})]});return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:" Login"})}),e.jsxs(_,{methods:a,onSubmit:g(w),children:[L,P]})]})};export{Z as default};
