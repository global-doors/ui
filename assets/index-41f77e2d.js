import{j as e,M as C,B as m,E as R,p as F,S as b,I as j,g as N,F as O,r as M,W as k,C as W,G as P,D as V,e as z}from"./index-910c26cb.js";import{b as G,C as T,M as A,c as B,d as E,O as H,e as U,F as q,R as w,u as L}from"./rhf-text-field-50501083.js";import{M as Y,C as f,D as _,R as I,a as J}from"./rhf-date-picker-a11753cd.js";import{B as S}from"./Button-310741d2.js";import{I as v}from"./Close-2449cc15.js";import{C as K}from"./CardContent-e2913a79.js";import"./CircularProgress-bdd735a2.js";const g=({name:r,chip:l,label:t,options:a,checkbox:d,placeholder:o,helperText:h,sx:x,...n})=>{const{control:s}=G(),p=u=>{const i=a.filter(c=>u.includes(c.value));return!i.length&&o?e.jsx(m,{component:"em",sx:{color:"text.disabled"},children:o}):l?e.jsx(m,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:i.map(c=>e.jsx(f,{label:c.label,size:"small"},c.value))}):i.map(c=>c.label).join(", ")};return e.jsx(T,{control:s,name:r,render:({field:u,fieldState:{error:i}})=>e.jsxs(A,{size:"small",sx:x,children:[t&&e.jsxs(B,{id:r,children:[" ",t," "]}),e.jsxs(E,{...u,displayEmpty:!!o,input:e.jsx(H,{error:!!i,fullWidth:!0,label:t,size:"small"}),labelId:r,multiple:!0,renderValue:p,size:"small",...n,children:[o&&e.jsx(C,{disabled:!0,value:"",children:e.jsxs("em",{children:[" ",o," "]})}),a.map(c=>{const D=u.value.includes(c.value);return e.jsxs(C,{value:c.value,children:[d&&e.jsx(Y,{checked:D,disableRipple:!0,size:"small"}),c.label]},c.value)})]}),(!!i||h)&&e.jsx(U,{error:!!i,children:i?i==null?void 0:i.message:h})]})})},Q=()=>[{field:"orderNumber",headerName:"Order No."},{field:"orderDate",headerName:"Order Date"},{field:"orderStatus",headerName:"Status"},{field:"currency",headerName:"Currency"},{field:"cost",headerName:"Cost"}],X=({data:r})=>{const l=R(),t=a=>{const d=a.row.orderNumber,o=F.dashboard.sales.order;l(o(d))};return e.jsx(_,{autoHeight:!0,columns:Q(),disableColumnMenu:!0,disableRowSelectionOnClick:!0,getRowId:a=>a.orderNumber,onRowClick:t,rows:r,sx:{mx:-3,"& .MuiDataGrid-row":{cursor:"pointer"}}})},y=({label:r,children:l,sx:t,...a})=>e.jsxs(b,{component:N,direction:"row",spacing:1,sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},variant:"outlined",...a,children:[e.jsx(m,{component:"span",sx:{typography:"subtitle2"},children:r}),e.jsx(b,{direction:"row",flexWrap:"wrap",spacing:1,children:l})]}),Z=({filters:r,onFilters:l,onResetFilters:t,results:a,...d})=>{const o=s=>{const p=r.orderStatus.filter(u=>u!==s);l("orderStatus",p)},h=s=>{const p=r.warehouse.filter(u=>u!==s);l("warehouse",p)},x=s=>{const p=r.deliveryMethod.filter(u=>u!==s);l("deliveryMethod",p)},n=!!r.orderStatus.length&&!!r.deliveryMethod.length&&!!r.warehouse.length;return e.jsxs(b,{alignItems:"flex-end",direction:"row",spacing:1,...d,children:[e.jsxs(b,{alignItems:"center",direction:"row",flexGrow:1,flexWrap:"wrap",spacing:1,children:[!!r.orderStatus.length&&e.jsx(y,{label:"Status:",children:r.orderStatus.map(s=>e.jsx(f,{label:s,onDelete:()=>o(s),size:"small"},s))}),!!r.warehouse.length&&e.jsx(y,{label:"Warehouse:",children:r.warehouse.map(s=>e.jsx(f,{label:s,onDelete:()=>h(s),size:"small"},s))}),!!r.deliveryMethod.length&&e.jsx(y,{label:"Delivery Method:",children:r.deliveryMethod.map(s=>e.jsx(f,{label:s,onDelete:()=>x(s),size:"small"},s))}),n&&e.jsx(S,{color:"error",onClick:t,startIcon:e.jsx(j,{icon:"solar:trash-bin-minimalistic-line-duotone"}),children:"Clear"})]}),e.jsxs(m,{sx:{typography:"body2"},children:[e.jsx("strong",{children:a}),e.jsx(m,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]})]})},$=[{label:"Placed",value:"placed"},{label:"Pending",value:"pending"}],ee=[{label:"Warehouse 1",value:"warehouse1"}],se=[{label:"Royal Mail",value:"royalMail"}],re=[{label:"Yes",value:"yes"},{label:"No",value:"no"}],te=({methods:r,resultsCount:l,showFilters:t})=>{const a=(o,h)=>{r.reset(x=>({...x,[o]:h}))},d=()=>r.reset();return e.jsxs(q,{methods:r,children:[e.jsx(O,{in:t,children:e.jsxs(b,{spacing:2,children:[e.jsxs(m,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(g,{checkbox:!0,fullWidth:!0,label:"Status",name:"orderStatus",options:$,size:"small"}),e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Name",name:"customerName"}),e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Order Number",name:"orderNumber"}),e.jsx(g,{checkbox:!0,fullWidth:!0,label:"Warehouse",name:"warehouse",options:ee})]}),e.jsxs(m,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Reference",name:"customerRef"}),e.jsx(g,{checkbox:!0,label:"Delivery Method",name:"deliveryMethod",options:se}),e.jsx(g,{label:"Printed",name:"printed",options:re}),e.jsx(I,{label:"Date From",name:"dateFrom"}),e.jsx(I,{label:"Date To",name:"dateTo"})]})]})}),e.jsx(m,{sx:{py:1},children:e.jsx(Z,{filters:r.watch(),onFilters:a,onResetFilters:d,results:l})})]})},ae=[{orderNumber:"1234",orderDate:new Date,requiredDate:new Date,customerCode:"CMS001",customerName:"Customer 1",customerRef:"REF1234567",warehouse:"Warehouse",orderStatus:"placed",currency:"GBP",cost:1234,margin:"5%",subtotal:"5.99",deliveryMethod:"royalMail",printed:"yes"}],he=()=>{const l=L({defaultValues:{orderStatus:[],customerName:"",orderNumber:"",customerRef:"",warehouse:[],deliveryMethod:[],printed:[],dateFrom:void 0,dateTo:void 0},mode:"onChange"}),t=l.watch(),a=M.useMemo(()=>{let n=ae.slice();return t.orderStatus.length&&(n=n.filter(s=>t.orderStatus.includes(s.orderStatus))),t.warehouse.length&&(n=n.filter(s=>t.warehouse.includes(s.warehouse))),t.deliveryMethod.length&&(n=n.filter(s=>t.deliveryMethod.includes(s.deliveryMethod))),t.printed.length&&(n=n.filter(s=>t.printed.includes(s.printed))),n},[t]),[d,o]=M.useState(!0),h=()=>o(!d),x=R();return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:" View Sales Orders"})}),e.jsxs(W,{maxWidth:"xl",children:[e.jsx(P,{action:e.jsxs(b,{direction:"row",spacing:1,children:[e.jsx(S,{startIcon:e.jsx(j,{icon:"solar:export-line-duotone"}),variant:"outlined",children:"Export"}),e.jsx(S,{onClick:()=>x("/dashboard/sales/add-order"),startIcon:e.jsx(j,{icon:"solar:add-square-line-duotone"}),variant:"contained",children:"Add Sales Order"})]}),heading:"View Sales Orders",links:[{name:"Sales",href:F.dashboard.root},{name:"View Sales Orders"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(V,{children:[e.jsx(J,{action:e.jsx(z,{onClick:h,children:e.jsx(j,{icon:d?"solar:filter-bold-duotone":"solar:filter-line-duotone"})})}),e.jsxs(K,{sx:{pt:0},children:[e.jsx(te,{methods:l,resultsCount:a.length,showFilters:d}),e.jsx(X,{data:a})]})]})]})]})};export{he as default};
