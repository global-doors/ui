import{a as S,r as c,b as F,c as v,d as T,P as A,j as e,W as I,S as l,T as R,e as E,I as W,L as k,R as q,p as B}from"./index-e60f0104.js";import{u as H,F as U,R as u}from"./rhf-text-field-1df89674.js";import{c as _,a as m,o as $}from"./index.esm-c721d93d.js";import{A as z}from"./Alert-dc848cdf.js";import{I as C}from"./Close-ad57aa50.js";import{L as G}from"./LoadingButton-39223037.js";import"./Button-24401243.js";const X=()=>{const r=S(),[o]=c.useState(""),a=F().get("returnTo"),s=v(),h=_().shape({username:m().required("Username is required"),password:m().required("Password is required")}),p={username:"",password:""},n=H({resolver:$(h),defaultValues:p}),{reset:t,handleSubmit:x}=n,{login:g}=T(),{mutate:f,isSuccess:i,isError:d,error:j,isLoading:b}=g,w=async P=>f(P);c.useEffect(()=>{i&&r.push(a||A),d&&t()},[j,d,i,t,a,r]);const y=e.jsx(l,{spacing:2,sx:{mb:5},children:e.jsx(R,{variant:"h4",children:"Sign in"})}),L=e.jsxs(l,{spacing:2.5,sx:{minWidth:320},children:[!!o&&e.jsx(z,{severity:"error",children:o}),e.jsx(u,{fullWidth:!0,label:"Username",name:"username"}),e.jsx(u,{fullWidth:!0,InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(E,{edge:"end",onClick:s.onToggle,children:e.jsx(W,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},label:"Password",name:"password",type:s.value?"text":"password"}),e.jsx(k,{color:"inherit",component:q,href:B.auth.jwt.forgotPassword,sx:{alignSelf:"flex-end"},underline:"always",variant:"body2",children:"Forgot password?"}),e.jsx(G,{color:"inherit",fullWidth:!0,loading:b,size:"large",type:"submit",variant:"contained",children:"Login"})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsx("title",{children:" Login"})}),e.jsxs(U,{methods:n,onSubmit:x(w),children:[y,L]})]})};export{X as default};
