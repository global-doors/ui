import{j as e,M as S,B as h,S as f,I as j,g as R,E as D,r as M,F,W as O,C as W,p as k,D as P,e as V}from"./index-7cc04fd2.js";import{b as z,C as T,M as A,c as B,d as E,O as G,e as H,F as U,R as w,u as q}from"./rhf-text-field-285d9bd8.js";import{M as L,C as g,D as Y,R as N,P as _,a as J}from"./rhf-date-picker-9016a359.js";import{B as y}from"./Button-659d9460.js";import{I as v}from"./Close-4809b5f4.js";import{C as K}from"./CardContent-ee694d34.js";import"./CircularProgress-5574bdf8.js";const b=({name:r,chip:a,label:t,options:o,checkbox:c,placeholder:n,helperText:m,sx:x,...l})=>{const{control:s}=z(),p=u=>{const d=o.filter(i=>u.includes(i.value));return!d.length&&n?e.jsx(h,{component:"em",sx:{color:"text.disabled"},children:n}):a?e.jsx(h,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:d.map(i=>e.jsx(g,{label:i.label,size:"small"},i.value))}):d.map(i=>i.label).join(", ")};return e.jsx(T,{control:s,name:r,render:({field:u,fieldState:{error:d}})=>e.jsxs(A,{size:"small",sx:x,children:[t&&e.jsxs(B,{id:r,children:[" ",t," "]}),e.jsxs(E,{...u,displayEmpty:!!n,input:e.jsx(G,{error:!!d,fullWidth:!0,label:t,size:"small"}),labelId:r,multiple:!0,renderValue:p,size:"small",...l,children:[n&&e.jsx(S,{disabled:!0,value:"",children:e.jsxs("em",{children:[" ",n," "]})}),o.map(i=>{const I=u.value.includes(i.value);return e.jsxs(S,{value:i.value,children:[c&&e.jsx(L,{checked:I,disableRipple:!0,size:"small"}),i.label]},i.value)})]}),(!!d||m)&&e.jsx(H,{error:!!d,children:d?d==null?void 0:d.message:m})]})})},Q=()=>[{field:"orderNumber",headerName:"Order No."},{field:"orderDate",headerName:"Order Date"},{field:"requiredDate",headerName:"Order Date"},{field:"customerCode",headerName:"Customer Code"},{field:"customerName",headerName:"Customer Name"},{field:"customerRef",headerName:"Customer Ref"},{field:"warehouse",headerName:"Warehouse"},{field:"orderStatus",headerName:"Status"},{field:"currency",headerName:"Currency"},{field:"cost",headerName:"Cost"},{field:"margin",headerName:"Margin"},{field:"subtotal",headerName:"Subtotal",disableColumnMenu:!0}],X=({data:r})=>e.jsx(Y,{autoHeight:!0,columns:Q(),disableColumnMenu:!0,disableRowSelectionOnClick:!0,getRowId:a=>a.orderNumber,rows:r,sx:{mx:-3}}),C=({label:r,children:a,sx:t,...o})=>e.jsxs(f,{component:R,direction:"row",spacing:1,sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},variant:"outlined",...o,children:[e.jsx(h,{component:"span",sx:{typography:"subtitle2"},children:r}),e.jsx(f,{direction:"row",flexWrap:"wrap",spacing:1,children:a})]}),Z=({filters:r,onFilters:a,onResetFilters:t,results:o,...c})=>{const n=s=>{const p=r.orderStatus.filter(u=>u!==s);a("orderStatus",p)},m=s=>{const p=r.warehouse.filter(u=>u!==s);a("warehouse",p)},x=s=>{const p=r.deliveryMethod.filter(u=>u!==s);a("deliveryMethod",p)},l=!!r.orderStatus.length&&!!r.deliveryMethod.length&&!!r.warehouse.length;return e.jsxs(f,{alignItems:"flex-end",direction:"row",spacing:1,...c,children:[e.jsxs(f,{alignItems:"center",direction:"row",flexGrow:1,flexWrap:"wrap",spacing:1,children:[!!r.orderStatus.length&&e.jsx(C,{label:"Status:",children:r.orderStatus.map(s=>e.jsx(g,{label:s,onDelete:()=>n(s),size:"small"},s))}),!!r.warehouse.length&&e.jsx(C,{label:"Warehouse:",children:r.warehouse.map(s=>e.jsx(g,{label:s,onDelete:()=>m(s),size:"small"},s))}),!!r.deliveryMethod.length&&e.jsx(C,{label:"Delivery Method:",children:r.deliveryMethod.map(s=>e.jsx(g,{label:s,onDelete:()=>x(s),size:"small"},s))}),l&&e.jsx(y,{color:"error",onClick:t,startIcon:e.jsx(j,{icon:"solar:trash-bin-minimalistic-line-duotone"}),children:"Clear"})]}),e.jsxs(h,{sx:{typography:"body2"},children:[e.jsx("strong",{children:o}),e.jsx(h,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]})]})},$=[{label:"Placed",value:"placed"},{label:"Pending",value:"pending"}],ee=[{label:"Warehouse 1",value:"warehouse1"}],se=[{label:"Royal Mail",value:"royalMail"}],re=[{label:"Yes",value:"yes"},{label:"No",value:"no"}],te=({methods:r,resultsCount:a,showFilters:t})=>{const o=(n,m)=>{r.reset(x=>({...x,[n]:m}))},c=()=>r.reset();return e.jsxs(U,{methods:r,children:[e.jsx(D,{in:t,children:e.jsxs(f,{spacing:2,children:[e.jsxs(h,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(b,{checkbox:!0,fullWidth:!0,label:"Status",name:"orderStatus",options:$,size:"small"}),e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Name",name:"customerName"}),e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Order Number",name:"orderNumber"}),e.jsx(b,{checkbox:!0,fullWidth:!0,label:"Warehouse",name:"warehouse",options:ee})]}),e.jsxs(h,{columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(5, 1fr)"},rowGap:3,children:[e.jsx(w,{InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(j,{icon:"solar:magnifer-line-duotone"})})},label:"Customer Reference",name:"customerRef"}),e.jsx(b,{checkbox:!0,label:"Delivery Method",name:"deliveryMethod",options:se}),e.jsx(b,{label:"Printed",name:"printed",options:re}),e.jsx(N,{label:"Date From",name:"dateFrom"}),e.jsx(N,{label:"Date To",name:"dateTo"})]})]})}),e.jsx(h,{sx:{py:1},children:e.jsx(Z,{filters:r.watch(),onFilters:o,onResetFilters:c,results:a})})]})},ae=[{orderNumber:"1234",orderDate:new Date,requiredDate:new Date,customerCode:"CMS001",customerName:"Customer 1",customerRef:"REF1234567",warehouse:"Warehouse",orderStatus:"placed",currency:"GBP",cost:1234,margin:"5%",subtotal:"5.99",deliveryMethod:"royalMail",printed:"yes"}],me=()=>{const a=q({defaultValues:{orderStatus:[],customerName:"",orderNumber:"",customerRef:"",warehouse:[],deliveryMethod:[],printed:[],dateFrom:void 0,dateTo:void 0},mode:"onChange"}),t=a.watch(),o=M.useMemo(()=>{let l=ae.slice();return t.orderStatus.length&&(l=l.filter(s=>t.orderStatus.includes(s.orderStatus))),t.warehouse.length&&(l=l.filter(s=>t.warehouse.includes(s.warehouse))),t.deliveryMethod.length&&(l=l.filter(s=>t.deliveryMethod.includes(s.deliveryMethod))),t.printed.length&&(l=l.filter(s=>t.printed.includes(s.printed))),l},[t]),[c,n]=M.useState(!0),m=()=>n(!c),x=F();return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:" View Sales Orders"})}),e.jsxs(W,{maxWidth:"xl",children:[e.jsx(_,{action:e.jsxs(f,{direction:"row",spacing:1,children:[e.jsx(y,{startIcon:e.jsx(j,{icon:"solar:export-line-duotone"}),variant:"outlined",children:"Export"}),e.jsx(y,{onClick:()=>x("/dashboard/sales/add-order"),startIcon:e.jsx(j,{icon:"solar:add-square-line-duotone"}),variant:"contained",children:"Add Sales Order"})]}),heading:"View Sales Orders",links:[{name:"Sales",href:k.dashboard.root},{name:"View Sales Orders"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(P,{children:[e.jsx(J,{action:e.jsx(V,{onClick:m,children:e.jsx(j,{icon:c?"solar:filter-bold-duotone":"solar:filter-line-duotone"})})}),e.jsxs(K,{sx:{pt:0},children:[e.jsx(te,{methods:a,resultsCount:o.length,showFilters:c}),e.jsx(X,{data:o})]})]})]})]})};export{me as default};
